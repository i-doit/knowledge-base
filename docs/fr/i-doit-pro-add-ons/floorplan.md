# Plan d'étage 

Via l'**extension** **Plan d'étage** [add-on](./index.md), il est possible de vous attribuer des plans graphiques à tous les [objets](../basics/structure-of-the-it-documentation.md) qui sont des objets de localisation, de les assortir de mesures et de positionner les objets attribués localement dans ce plan.

[![Plan d'étage](../assets/images/en/i-doit-pro-add-ons/floorplan/1-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/1-fp.png)

Cette extension est [installée via le centre d'administration](./index.md). Ensuite, vous la trouverez dans **Extras → Plan d'étage**.

[![Accès](../assets/images/en/i-doit-pro-add-ons/floorplan/2-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/2-fp.png)

Attribution des droits
----------------------

Sous **Administration → Système d'autorisation → Droits → Plan d'étage**, les droits des personnes et des groupes de personnes peuvent être ajustés.

[![Attribution des droits](../assets/images/en/i-doit-pro-add-ons/floorplan/3-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/3-fp.png)
------------------------------------------------------------------------------------------------------------------------------------

Créer un plan d'étage
-----------------------

Les objets pour lesquels vous souhaitez créer un plan d'étage peuvent être sélectionnés via la loupe [![icône](../assets/images/en/i-doit-pro-add-ons/floorplan/4-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/4-fp.png) en haut de l'écran. Tous les [types d'objets](../basics/structure-of-the-it-documentation.md) pouvant servir de lieux sont disponibles à cet effet. Si des plans d'étage ont déjà été créés, ceux-ci peuvent être sélectionnés et ouverts via le tableau multicolore [![icône](../assets/images/en/i-doit-pro-add-ons/floorplan/5-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/5-fp.png) à côté de la loupe. Des graphiques tels que la disposition d'une pièce peuvent être placés en arrière-plan via le bouton [![icône](../assets/images/en/i-doit-pro-add-ons/floorplan/6-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/6-fp.png). Une échelle peut être ajoutée à ce graphique en utilisant le bouton [![icône](../assets/images/en/i-doit-pro-add-ons/floorplan/7-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/7-fp.png). La mesure de la pièce aide à positionner les objets plus tard afin qu'ils puissent être représentés à l'échelle et selon leur facteur de forme défini. 



Les formats graphiques suivants sont pris en charge pour le plan d'étage : bmp, png, jpg, jpeg, gif. La taille maximale du fichier est limitée à 5 Mo.

[![formats](../assets/images/en/i-doit-pro-add-ons/floorplan/8-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/8-fp.png)

Attribuer et Placer des Objets

Via le bouton [![Attribuer des Objets](../assets/images/en/i-doit-pro-add-ons/floorplan/9-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/9-fp.png), vous pouvez accéder à une liste d'aperçu de tous les objets qui sont attribués localement.

[![Placer des Objets](../assets/images/en/i-doit-pro-add-ons/floorplan/10-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/10-fp.png)

Tous les objets affichés avec un [![icône](../assets/images/en/i-doit-pro-add-ons/floorplan/11-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/11-fp.png) vert ne sont pas encore attribués dans le plan. Vous pouvez le faire pour chaque objet individuel en utilisant le bouton [![icône](../assets/images/en/i-doit-pro-add-ons/floorplan/12-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/12-fp.png) ou vous pouvez placer tous les objets sur le plan en une seule fois en utilisant le bouton [![icône](../assets/images/en/i-doit-pro-add-ons/floorplan/13-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/13-fp.png). Les objets qui n'ont pas encore été attribués localement à cet objet peuvent être attribués en utilisant le bouton [![icône](../assets/images/en/i-doit-pro-add-ons/floorplan/14-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/14-fp.png), ce qui rend ces objets disponibles pour le positionnement. Une fois les objets sur le plan, ils peuvent être déplacés et sélectionnés en double-cliquant.

Ajuster et Former des Objets sur le Plan d'Étage
----------------------------------------

Dans la zone de gauche, vous trouverez l'option pour ajuster et former davantage les objets. Dès qu'un objet est sélectionné, il peut être édité :

[![Changer la position](../assets/images/en/i-doit-pro-add-ons/floorplan/15-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/15-fp.png) Changer la position : Cela sélectionne l'objet et il peut être positionné immédiatement (même fonction que double-cliquer sur l'objet).

[![Forme de l'objet](../assets/images/en/i-doit-pro-add-ons/floorplan/16-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/16-fp.png) Choisir / créer une forme d'objet : La forme de l'objet peut être ajustée selon vos souhaits. Des formes personnalisées peuvent être enregistrées.

[![Centrer](../assets/images/en/i-doit-pro-add-ons/floorplan/17-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/17-fp.png) Centrer sur l'objet : L'objet sélectionné est centré au milieu de l'écran.

[![Rotation](../assets/images/en/i-doit-pro-add-ons/floorplan/18-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/18-fp.png) Rotation : L'objet peut être tourné de la manière souhaitée.

[![Objet déplacé](../assets/images/en/i-doit-pro-add-ons/floorplan/19-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/19-fp.png) Objet déplacé : L'objet disparaît du plan d'étage mais peut être ajouté à nouveau en utilisant la liste des objets.

[![Facteur de forme](../assets/images/en/i-doit-pro-add-ons/floorplan/20-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/20-fp.png) Les données des objets de la **catégorie Formfactor** [sont appliquées via ce bouton](../basics/structure-of-the-it-documentation.md). L'objet sera mis à l'échelle et affiché en fonction de l'échelle définie du plan d'étage.

[![Liste de sélection](../assets/images/en/i-doit-pro-add-ons/floorplan/21-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/21-fp.png) Certains types d'objets peuvent être affichés ou masqués dans le plan d'étage en utilisant cette liste de sélection dans la zone inférieure.

[![L'objet sélectionné](../assets/images/en/i-doit-pro-add-ons/floorplan/22-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/22-fp.png) L'objet sélectionné dans le plan d'étage sera ouvert dans un nouvel onglet à l'intérieur du navigateur lorsque vous cliquez sur ce bouton.

Lorsque l'objet est sélectionné en mode édition, il est mis en surbrillance par un contour clignotant et d'autres options sont disponibles pour changer la forme et la rotation libre.

[![Plan d'étage](../assets/images/en/i-doit-pro-add-ons/floorplan/23-fp.gif)](../assets/images/en/i-doit-pro-add-ons/floorplan/23-fp.gif)

## Fusion de plans de salles

Il devrait être possible d'ajouter des plans de salles à un plan de salles - imaginons un étage qui contient plusieurs pièces. Dans ce plan d'étage "étage", nous voulons positionner le plan d'étage "pièce".
Nous devons définir quelques règles de base ici - par exemple, nous ne montrons que trois niveaux de plan d'étage, c'est-à-dire :

```text
Base floorplan:
-   obj A
-   obj B
-   floorplan A:
    -   obj C
    -   obj D
-   floorplan B:
    -   obj E
    -   obj F
    -   floorplan C (display as a empty block without its positioned objects)
        -   obj G
        -   obj H
```

Imaginons que nous visualisons actuellement le "plan d'étage principal". Nous devrions pouvoir voir le plan d'étage imbriqué "A" et à l'intérieur de celui-ci, nous devrions pouvoir voir le plan d'étage "B" (comprenant "obj E" et "obj F"). Mais le "plan d'étage C" ne sera pas affiché en tant que plan d'étage - à la place, il ressemblera à un objet de base, car nous limitons les plans d'étage imbriqués à trois niveaux (pour éviter les problèmes de récursion, de mémoire et de performances).

### Comment ça fonctionne 

Si vous consultez le "plan d'étage principal", vous pouvez déplacer "le plan d'étage A" et "le plan d'étage B" comme les autres objets ("obj A" et "obj B") - vous ne pouvez pas modifier quoi que ce soit à l'intérieur de celui-ci.

### Quand un plan d'étage imbriqué peut-il être affiché?

Pour afficher "le plan d'étage A" en tant que plan d'étage à l'intérieur du "plan d'étage principal", il doit remplir l'une de ces conditions :

-   Avoir une image de fond
-   Avoir une mise en page

Si l'une de ces conditions est remplie, vous verrez l'icône suivante lorsque vous modifiez un objet de plan d'étage (à l'intérieur d'un autre plan d'étage) :

[![icône](../assets/images/en/i-doit-pro-add-ons/floorplan/add-on-icon.svg)](../assets/images/en/i-doit-pro-add-ons/floorplan/add-on-icon.svg)

Exemple

[![exemple gif](../assets/images/en/i-doit-pro-add-ons/floorplan/floorplan-toggle.gif)](../assets/images/en/i-doit-pro-add-ons/floorplan/floorplan-toggle.gif)

Le plan d'étage doit être mis à l'échelle par rapport à la taille de l'objet précédent, la mise en page / l'image de fond sera utilisée pour déterminer l'échelle.

Profils de plan d'étage
-----------------------

Des profils peuvent être créés afin que seuls certains objets ou attributs des objets soient affichés.  
Un profil est fourni avec le programme. Bien sûr, vous pouvez également créer vos propres profils.

[![Profils du plan d'étage](../assets/images/en/i-doit-pro-add-ons/floorplan/24-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/24-fp.png)

Pour créer un nouveau profil, cliquez sur [![profils](../assets/images/en/i-doit-pro-add-ons/floorplan/25-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/25-fp.png).  
Cela ouvre une fenêtre contextuelle dans laquelle les profils sont gérés.

[![profils](../assets/images/en/i-doit-pro-add-ons/floorplan/26-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/26-fp.png)

Après avoir cliqué sur "Créer un nouveau profil", nous arrivons à la vue d'édition. Ici, nous attribuons d'abord le nom du profil. Ensuite, nous pouvons choisir si "Ouvrir la vue objet en cliquant sur l'objet" doit être activé et si  
si "Double-cliquer sur l'objet pour l'ouvrir dans un nouvel onglet" doit être activé.

**Dans l'onglet Options de visualisation, nous avons le choix :**

[![Couleur de mise en évidence](../assets/images/en/i-doit-pro-add-ons/floorplan/27-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/27-fp.png)

-   Couleur de mise en évidence : Ici, vous pouvez sélectionner une couleur qui contourne l'objet lorsqu'il est cliqué.  
    Avec la sélection de #FB481C, cela ressemblerait à cela

[![Afficher le rayon de l'objet](../assets/images/en/i-doit-pro-add-ons/floorplan/28-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/28-fp.png)

-   Afficher le rayon de l'objet : Cela définit si le rayon de l'objet est affiché par défaut.

**Dans l'onglet Valeurs par défaut, un filtre de type d'objet peut être configuré.**

[![filtre](../assets/images/en/i-doit-pro-add-ons/floorplan/29-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/29-fp.png)

**Dans l'onglet Informations sur l'objet, des attributs peuvent être sélectionnés dans différentes catégories.**

[![attributs](../assets/images/en/i-doit-pro-add-ons/floorplan/30-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/30-fp.png)

Ces informations sur l'objet sont ensuite affichées dans la vue de l'objet sous les informations sur l'objet.

[![informations sur l'objet](../assets/images/en/i-doit-pro-add-ons/floorplan/31-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/31-fp.png)

**Dans l'onglet Paramètres, vous pouvez définir le profil, globalement ou par défaut pour les utilisateurs.**

[![par défaut](../assets/images/en/i-doit-pro-add-ons/floorplan/32-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/32-fp.png)


Export
------

Les plans d'étage peuvent être exportés sous forme de fichier SVG ou PNG en utilisant le bouton [![Export](../assets/images/en/i-doit-pro-add-ons/floorplan/33-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/33-fp.png). 

Versions
--------

| Version | Date | Journal des modifications |
| --- | --- | --- |
| 1.8 | 2024-02-27 | [Tâche] Compatibilité avec i-doit 29, Colorpicker et PHP 8.2 |
| 1.7 | 2023-11-07 | [Bogue] MySQL8 provoque une erreur de base de données "DATETIME incorrect" lors de l'ouverture du plan d'étage<br>[Bogue] Lors de la rotation d'un objet, le texte devrait également tourner<br>[Bogue] La constante de langue 'LC__CMDB__CATG__ACCOUNTING_ORDER_DATE' n'est pas remplacée<br>[Bogue] Mettre en évidence 'add-on' au lieu de 'extras' dans le menu |
| 1.6 | 2022-09-05 | [Tâche] Compatibilité avec PHP 8.0  <br>[Tâche] Compatibilité de conception |
| 1.5.1 | 2022-02-22 | [Bogue] Les plans d'étage ne peuvent pas être ouverts |
| 1.5 |     | [Amélioration] Il est possible d'afficher un plan d'étage dans un plan d'étage  <br>[Amélioration] Il est possible de supprimer une mise en page du plan d'étage  <br>[Amélioration] Il est possible de supprimer l'arrière-plan du plan d'étage  <br>[Amélioration] Afficher le nom de l'objet du plan d'étage actuel dans le fil d'Ariane  <br>[Bogue] La fonction pour hériter des données de format de formulaire échoue à dimensionner correctement |
| 1.4.4 |     | [Bogue] Taille d'en-tête personnalisable  <br>[Bogue] Option pour commencer un chapitre sur une nouvelle page est ignorée  <br>[Bogue] Lors de l'enregistrement du contenu d'un sous-chapitre, de nouveaux sous-chapitres sont toujours créés  <br>[Bogue] La fonction d'objet externe ne fonctionne pas dans l'add-on Documents  <br>[Bogue] Les autorisations pour l'add-on document sont incorrectes (Enregistrer le modèle)  <br>[Bogue] La création de documents affiche toujours un avertissement, des modèles vides existent  <br>[Bogue] La sortie du contact principal n'est pas possible  <br>[Bogue] L'objet principal ne peut plus être édité dans l'add-on Documents lorsque la grille est désactivée  <br>[Bogue] Après avoir enregistré un modèle de document, les paramètres dans l'onglet Options sont affichés de manière incorrecte  <br>[Bogue] Les chapitres d'autres modèles de documents ne sont pas référencés correctement |
| 1.4.3 |     | [Amélioration] Compatibilité avec i-doit 1.16 |
| 1.4.2 |     | [Bogue] Les autorisations pour l'add-on document sont incorrectes (Enregistrer le modèle)  <br>[Bogue] Les autorisations pour l'add-on document sont incorrectes (Modèles visibles)  <br>[Bogue] Les en-têtes ne sont affichés que sur la première page  <br>[Bogue] Les attributs des cartes SIM assignées aux téléphones mobiles ne peuvent pas être affichés  <br>[Bogue] La sortie d'un champ oui/non avec rien de sélectionné "-" n'est pas correcte  <br>[Bogue] Une nouvelle révision d'un document ne peut pas être créée si la liste a été filtrée |
| 1.4.1 |     | [Amélioration] Créer un document pour plusieurs objets  <br>[Amélioration] Rendre le plan d'étage disponible dans l'add-on Documents  <br>[Bogue] Tables affichées de manière corrompue au format PDF  <br>[Bogue] Le chemin d'accès est affiché de manière peu attrayante  <br>[Bogue] Les attributs sélectionnés de l'objet principal sont supprimés lors de la réouverture |
| 1.4 |     | [Amélioration] La taille des en-têtes ne peut pas être ajustée.  <br>[Amélioration] Les images ne peuvent pas être affichées sur toute la ligne d'en-tête  <br>[Amélioration] Supprimer l'exigence de l'extension "bcmath" de PHP  <br>[Amélioration] Requêtes IF dans les catégories définies par l'utilisateur  <br>[Bogue] Le placeholder ne représente qu'une sous-requête avec une profondeur de récursion  <br>[Bogue] La sortie du contact principal n'est pas possible  <br>[Bogue] Doku: Les objets assignés du plan d'urgence ne livrent que le premier objet  <br>[Bogue] Les contacts archivés de la catégorie "affectation de contact" sont affichés  <br>[Bogue] Les modèles de documents ne peuvent pas être triés par date de création/date de modification  <br>[Bogue] Les documents PDF n'affichent pas correctement la mise en forme  <br>[Bogue] L'image dans le pied de page est affichée dans des tailles différentes  <br>[Bogue] Les tables n'étaient pas correctement tronquées lorsqu'elles dépassent deux pages  <br>[Bogue] Les lignes sont inutilement hautes/larges dans les documents HTML |
| 1.3.3 |     | [Bogue] Le champ de description de la catégorie "e-mail" ne s'affiche pas dans un tableau  <br>[Bogue] Le placeholder pour la date de création/date de révision contient également l'heure de création  <br>[Bogue] L'exportation des champs énumérés depuis l'éditeur wysiwyg n'est pas possible |
| 1.3.2 |     | [Bogue] Mauvais comportement avec la licence d'add-on |
| 1.3.1 |     | [Bogue] Les colonnes de tableau vides peuvent déclencher des avertissements PHP lors de la création de révisions  <br>[Bogue] Corriger l'autorisation d'importer un modèle depuis le référentiel |
| 1.3 |     | [Amélioration] Supprimer un plan de pièce  <br>[Amélioration] Couches et transparence  <br>[Amélioration] Les plans d'étage peuvent maintenant être supprimés  <br>[Amélioration] Améliorer les options d'exportation  <br>[Amélioration] Fournir des captures d'écran de plan d'étage (par ex. add-on documents)  <br>[Bogue] Le libellé de champ du champ de date des catégories créées par l'utilisateur n'est pas affiché correctement |
| 1.2.3 |     | [Bogue] Le plan de pièce ne peut pas être utilisé avec seulement le droit "voir" |
| 1.2.2 | 2019-07-05 | [Bogue] Les boutons dans l'arborescence de navigation ne sont pas cliquables<br>[Bogue] Cliquer sur un objet non positionné à l'intérieur de l'arborescence de navigation déclenche une erreur JS<br>[Bogue] Éditer et enregistrer sur l'écran de démarrage provoque une erreur SQL<br> |
| 1.2.1 | 2019-05-20 | [Bogue] Créer une nouvelle pièce n'est pas possible<br>[Bogue] L'adresse i-doit définie (URL) est ignorée et le nom d'hôte est utilisé à la place<br>[Bogue] Les profils ne sont pas enregistrés avec des références<br>[Bogue] Impossible d'enregistrer les profils[Bogue] Les longs titres d'objet ne sont pas beaux dans l'arborescence de localisation<br> |
| 1.2 | 2018-12-05 | [Amélioration] Faire pivoter librement les objets au lieu de pas de 90°<br>[Amélioration] Exporter le plan d'étage en tant que PNG<br>[Amélioration] Nouvelle fonction pour ouvrir un objet sélectionné<br>[Amélioration] Mise à jour de l'interface utilisateur : afficher l'arborescence de localisation<br>[Amélioration] Faire pivoter les objets de 45 au lieu de 90 degrés<br>[Amélioration] Un polygone d'objet peut être composé de 20 au lieu de 10 points<br>[Amélioration] Rendre l'éditeur de polygones plus intuitif<br>[Amélioration] Implémenter le mode vue et édition<br>[Amélioration] Améliorer l'édition et le positionnement des objets<br>[Amélioration] Les objets peuvent afficher un rayon propre<br>[Amélioration] Écran de démarrage avec les cinq derniers plans d'étage mis à jour/créés<br>[Amélioration] Rendre la catégorie de plan d'étage plus dynamique<br>[Amélioration] L'arborescence de navigation affiche les objets positionnés<br>[Amélioration] Nouveaux profils analogues à l'explorateur CMDB<br>[Amélioration] Les objets cliqués devraient être affichés de manière plus visible<br>[Bogue] Mettre à jour la catégorie de plan d'étage avec des fonctions utiles<br>[Bogue] La couleur de police est trop sombre pour certaines couleurs de type d'objet<br>[Changement] Remplacer le navigateur d'objets par l'arborescence de localisation<br> |
| 1.1 | 2018-04-16 | [Amélioration]   L'échelle sera désormais affichée dynamiquement<br>[Amélioration]   Zoom plus fluide<br>[Bogue] L'image d'arrière-plan ne sera pas affichée après le téléchargement<br>[Bogue] Faute d'orthographe de formfactor dans la version anglaise du plan d'étage<br> |
| 1.0.5 | 2017-10-02 | [Bogue] La liste des objets ne sera pas affichée correctement<br>[Bogue] L'image d'arrière-plan ne sera pas affichée après le déplacement de l'installation<br>[Bogue] Le plan d'étage montre des objets avec un statut non-"normal"<br> |
| 1.0.4 | 2017-05-02 | [Bogue] Les icônes ajoutées par l'utilisateur ne se mettent pas à l'échelle dans l'extension du plan d'étage<br>[Bogue] L'échelle n'est pas définie, le bouton "données de facteur de forme" est désactivé<br> |
| 1.0.3 | 2016-10-24 | [Amélioration] Échec lors du téléchargement d'une image d'arrière-plan<br> |
| 1.0.2 |     | [Changement] Compatibilité avec i-doit 1.8<br>[Bogue] Le lien d'objet est mal formé lorsque l'URL Wiki est configurée<br>[Bogue] Le droit de lecture est suffisant pour apporter des modifications dans le plan d'étage<br> |
| 1.0.1 | 2016-03-23 | Version initiale |


