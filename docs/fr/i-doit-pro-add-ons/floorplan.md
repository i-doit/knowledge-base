# Floorplan

Via the **Floorplan** [add-on](./index.md) it is possible for you to assign graphical plans to all [objects](../basics/structure-of-the-it-documentation.md) which are location objects, to match them with measurements and to position the locally assigned objects in this plan.

[![Floorplan](../assets/images/en/i-doit-pro-add-ons/floorplan/1-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/1-fp.png)

This add-on is [installed via the admin center](./index.md). Afterwards you will find it at **Extras → Floorplan**.

[![Access](../assets/images/en/i-doit-pro-add-ons/floorplan/2-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/2-fp.png)

Rights assignment
-----------------

Under **Administration → Authorization system → Rights → Floorplan**, rights for persons and groups of persons can be adjusted.

[![Rights assignment](../assets/images/en/i-doit-pro-add-ons/floorplan/3-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/3-fp.png)
------------------------------------------------------------------------------------------------------------------------------------

Create a Floorplan
------------------

The objects for which you wish to create a floorplan can be selected via the magnifier [![icon](../assets/images/en/i-doit-pro-add-ons/floorplan/4-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/4-fp.png) at the top of the screen. All [object types](../basics/structure-of-the-it-documentation.md) that can serve as locations are available for this. If floorplans have been created already, these can be selected and opened via the multicolored table [![icon](../assets/images/en/i-doit-pro-add-ons/floorplan/5-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/5-fp.png) next to the magnifier. Graphics as for example the layout of a room can be put in the background via the [![icon](../assets/images/en/i-doit-pro-add-ons/floorplan/6-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/6-fp.png) button. A scale can be added to this graphic using the [![icon](../assets/images/en/i-doit-pro-add-ons/floorplan/7-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/7-fp.png) button. The measuring of the room helps for the positioning of objects later on so that these can be represented true to their scale and their defined formfactor.

The following graphic formats are supported for the floorplan: bmp, png, jpg, jpeg, gif. The maximum file size is limited to 5mb.

[![formats](../assets/images/en/i-doit-pro-add-ons/floorplan/8-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/8-fp.png)

Assign and Place Objects

Via the [![Assign Objects](../assets/images/en/i-doit-pro-add-ons/floorplan/9-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/9-fp.png) button you can access an overview list of all objects which are locally assigned.

[![Place Objects](../assets/images/en/i-doit-pro-add-ons/floorplan/10-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/10-fp.png)

All objects that are displayed with a green [![icon](../assets/images/en/i-doit-pro-add-ons/floorplan/11-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/11-fp.png) are not yet assigned within the plan. You can either do this for each single object using the [![icon](../assets/images/en/i-doit-pro-add-ons/floorplan/12-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/12-fp.png) button or you can put all objects on the plan at once by using the [![icon](../assets/images/en/i-doit-pro-add-ons/floorplan/13-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/13-fp.png) button. Objects that have not yet been locally assigned to this object can be assigned using the [![icon](../assets/images/en/i-doit-pro-add-ons/floorplan/14-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/14-fp.png) button which makes those objects available for positioning. Once the objects are on the plan they can be moved and selected via double click.

Adjust and Form Objects on the Floorplan
----------------------------------------

In the left area you will find the option to further adjust and form objects. As soon as an object is selected it can be edited:

[![Change position](../assets/images/en/i-doit-pro-add-ons/floorplan/15-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/15-fp.png) Change position: This selects the object and it can be positioned immediately (same function as double clicking the object).

[![objectform](../assets/images/en/i-doit-pro-add-ons/floorplan/16-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/16-fp.png) Choose / create objectform: The form of the object can be adjusted as desired. Custom forms can be saved.

[![Center](../assets/images/en/i-doit-pro-add-ons/floorplan/17-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/17-fp.png) Center on object: The selected object is centered in the middle of the screen.

[![Rotate](../assets/images/en/i-doit-pro-add-ons/floorplan/18-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/18-fp.png) Rotate: The object can be rotated in any desired way.

[![Unposition object](../assets/images/en/i-doit-pro-add-ons/floorplan/19-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/19-fp.png) Unposition object: The object disappears from the floorplan but can be added again using the object list.

[![Formfactor](../assets/images/en/i-doit-pro-add-ons/floorplan/20-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/20-fp.png) The objects data from the **Formfactor** [category](../basics/structure-of-the-it-documentation.md) are applied via this button. The object will be scaled and displayed accordingly to the set scale of the floorplan.

[![selection list](../assets/images/en/i-doit-pro-add-ons/floorplan/21-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/21-fp.png) Certain object types can be shown or hidden within the floorplan using this selection list in the lower area.

[![The selected](../assets/images/en/i-doit-pro-add-ons/floorplan/22-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/22-fp.png) The selected object within the floorplan will be opened in a new tab inside the browser when you click this button.

When the object is selected in edit mode, it is highlighted by a blinking outline and further options are available for changing the shape and free rotation.

[![Floorplan](../assets/images/en/i-doit-pro-add-ons/floorplan/23-fp.gif)](../assets/images/en/i-doit-pro-add-ons/floorplan/23-fp.gif)

## Zusammenführung von Raumplänen

It should be possible to add floorplans to a floorplan - let's think of a floor that contains several rooms. In this "floor" floorplan we want to position the "room" floorplan.
We need to set some basic rules here - for example, we show only three levels of floorplan, that is:

```text
Base floorplan:
-   obj A
-   obj B
-   floorplan A:
    -   obj C
    -   obj D
-   floorplan B:
    -   obj E
    -   obj F
    -   floorplan C (display as a empty block without its positioned objects)
        -   obj G
        -   obj H
```

Let us imagine we are currently viewing "main floorplan". We should be able to see the nested "floorplan A" and inside of that we should be able to see "floorplan B" (including "obj E" and "obj F"). But "floorplan C" will not be displayed as floorplan - instead it will look like a basic object, because we limit the nested floorplans to three levels (to prevent recursion, memory and performance issues).

### How it works

If you are viewing "main floorplan" you can move "floorplan A" and "floorplan B" like the other objects ("obj A" and "obj B") - you can not edit anything inside this imported

### When can a nested floorplan be displayed?

In order to display "floorplan A" as floorplan inside "main floorplan" it has to fulfill one of these conditions:

-   Have a background image
-   Have a layout

If one of these conditions is met, you will see the following icon, when editing a floorplan object (inside another floorplan):

[![icon](../assets/images/en/i-doit-pro-add-ons/floorplan/add-on-icon.svg)](../assets/images/en/i-doit-pro-add-ons/floorplan/add-on-icon.svg)

Example

[![example gif](../assets/images/en/i-doit-pro-add-ons/floorplan/floorplan-toggle.gif)](../assets/images/en/i-doit-pro-add-ons/floorplan/floorplan-toggle.gif)

The floorplan should be scaled to the previous object size, the layout / background image will be used to determine the scale.

Floorplan Profiles
------------------

Profiles can be created so that only certain objects or attributes of the objects are displayed.  
A profile is supplied with the program. Of course, you can also create your own profiles.

[![Floorplan Profiles](../assets/images/en/i-doit-pro-add-ons/floorplan/24-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/24-fp.png)

To create a new profile click on [![profiles](../assets/images/en/i-doit-pro-add-ons/floorplan/25-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/25-fp.png).  
This opens a popup window in which the profiles are managed.

[![profiles](../assets/images/en/i-doit-pro-add-ons/floorplan/26-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/26-fp.png)

After clicking on "Create new profile" we get to the editing view. Here we first assign the name of the profile. Then we can choose whether "Open object view when clicking on object" should be activated and whether  
whether "Double-click on object to open in new tab" should be activated.

**In the Visualization Options tab we have a choice:**

[![Highlight color](../assets/images/en/i-doit-pro-add-ons/floorplan/27-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/27-fp.png)

-   Highlight color: Here you can select a color that outlines the object when it is clicked.  
    With the selection of #FB481C this would look like this

[![Show object radius](../assets/images/en/i-doit-pro-add-ons/floorplan/28-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/28-fp.png)

-   Show object radius: This defines whether the object radius is displayed by default.

**In the Default values tab an object type filter can be configured.**

[![filter](../assets/images/en/i-doit-pro-add-ons/floorplan/29-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/29-fp.png)

**In the Object Information tab, attributes can be selected from various categories.**

[![attributes](../assets/images/en/i-doit-pro-add-ons/floorplan/30-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/30-fp.png)

This object information is then displayed in the object view under object information.

[![object information](../assets/images/en/i-doit-pro-add-ons/floorplan/31-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/31-fp.png)

**In the Settings tab you can define the profile, globally or for users as default.**

[![defaults](../assets/images/en/i-doit-pro-add-ons/floorplan/32-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/32-fp.png)

Export
------

Floorplans can be exported as SVG or PNG file using the button [![Export](../assets/images/en/i-doit-pro-add-ons/floorplan/33-fp.png)](../assets/images/en/i-doit-pro-add-ons/floorplan/33-fp.png).

Releases
--------

| Version | Date | Changelog |
| --- | --- | --- |
| 1.8 | 2024-02-27 | [Task] Compatibility to i-doit 29, Colorpicker and PHP 8.2 |
| 1.7 | 2023-11-07 | [Bug] MySQL8 causes database error "incorrect DATETIME" when opening Floorplan<br>[Bug] When turning an object, the text should also turn<br>[Bug] Language constant 'LC__CMDB__CATG__ACCOUNTING_ORDER_DATE' is not replaced<br>[Bug] Highlight 'add-on' instead of 'extras' menu |
| 1.6 | 2022-09-05 | [Task] PHP 8.0 Compatibility  <br>[Task] Design Compatibility |
| 1.5.1 | 2022-02-22 | [Bug] Floorplans cannot be opened |
| 1.5 |     | [Improvement] It is possible to display a floorplan in a floorplan  <br>[Improvement] It is possible to remove a layout from the floorplan  <br>[Improvement] It is possible to remove the background from the floorplan  <br>[Improvement] Show the object name of the current floorplan in the breadcrumb  <br>[Bug] Function to inherit formfactor data scales dimensions wrong |
| 1.4.4 |     | [Bug] Customizable header size  <br>[Bug] Option to start chapter on new page is ignored  <br>[Bug] When saving the contents of a subchapter, new subchapters are always created  <br>[Bug] External Object function does not work in the Documents Add on  <br>[Bug] Permissions for the document add-on are incorrect (Save Template)  <br>[Bug] Creating documents always shows warning, empty templates exist  <br>[Bug] Output of the primary contact is not possible  <br>[Bug] Main object can no longer be edited in the Documents add-on when the grid is disabled  <br>[Bug] Nach dem Speichern einer Dokumentvorlage werden die Einstellungen auf der Registerkarte Optionen falsch angezeigt  <br>[Bug] Chapters from other document templates are not referenced correctly |
| 1.4.3 |     | [Improvement] Compatibility with i-doit 1.16 |
| 1.4.2 |     | [Bug] Permissions for the document add-on are incorrect (Save Template)  <br>[Bug] Authorizations for the document add-on are incorrect (Templates Visible)  <br>[Bug] Headers are only displayed on the first page  <br>[Bug] Attributes of SIM cards assigned to mobile phones cannot be displayed  <br>[Bug] The output of a yes/no field with nothing selected "-" is not correct  <br>[Bug] New revision of a document cannot be created if the list has been filtered |
| 1.4.1 |     | [Improvement] Create a document for multiple objects  <br>[Improvement] Make floor plan available in the documents add-on  <br>[Bug] Tables corruptedly displayed in PDF format  <br>[Bug] The location path is displayed unsightly  <br>[Bug] Selected attributes of master object are deleted when reopened |
| 1.4 |     | [Improvement] The size of the headings cannot be adjusted.  <br>[Improvement] Images cannot be displayed over the entire header line  <br>[Improvement] Remove requirement for PHPs "bcmath" extension  <br>[Improvement] IF Queries in User-Defined Categories  <br>[Bug] Placeholder represents only sub-request with one recursion depth  <br>[Bug] Output of the primary contact is not possible  <br>[Bug] Doku: Assigned objects from emergency plan delivers only first object  <br>[Bug] Archived contacts of the category "contact assignment" are output  <br>[Bug] Document templates cannot be sorted by creation date/change date  <br>[Bug] PDF documents do not display the formatting correctly  <br>[Bug] Image in footer is displayed in different sizes  <br>[Bug] Tables were not properly truncated when this goes over two pages  <br>[Bug] lines are unnecessarily high/wide in HTML documents |
| 1.3.3 |     | [Bug] Category "e-mail" description field no outpot in a table  <br>[Bug] Placeholder for creation date/revision date also contains time of creation  <br>[Bug] Export of enumerated fields from the wysiwyg editor is not possible |
| 1.3.2 |     | [Bug] Bad behavior with add-on license |
| 1.3.1 |     | [Bug] Empty table columns can trigger PHP warnings during revision creation  <br>[Bug] Fix permission to import template from repository |
| 1.3 |     | [Improvement] Delete a room plan  <br>[Improvement] Layers and transparency  <br>[Improvement] Floorplans can now be deleted  <br>[Improvement] Improve export options  <br>[Improvement] Provide floorplan screenshots (e.g. documents add-on)  <br>[Bug] The field label of the date field of self created categories is not displayed correctly |
| 1.2.3 |     | [Bug] Room plan can not be used with only "see" right |
| 1.2.2 | 2019-07-05 | [Bug] Buttons in navigation tree are not clickable<br>[Bug] Clicking a unpositioned object inside the navigation tree triggers a JS error<br>[Bug] Edit and save on the "splash screen" causes a SQL error<br> |
| 1.2.1 | 2019-05-20 | [Bug] Creating a new room is not possible<br>[Bug] Defined i-doit address (URL) is ignored and the host name is used instead<br>[Bug] Profiles are not saved with references<br>[Bug] Cannot save profiles[Bug] Long object titles don't look good in the location tree<br> |
| 1.2 | 2018-12-05 | [Improvement] Rotate objects freely instead of 90° steps<br>[Improvement] Export the floorplan as PNG<br>[Improvement] New function to open a selected object<br>[Improvement] GUI Update: display location tree<br>[Improvement] Rotate objects 45 instead of 90 degrees<br>[Improvement] A object-polygon can consist of 20 instead of 10 points<br>[Improvement] Make the polygon-editor more intuitive<br>[Improvement] Implement view and edit mode<br>[Improvement] Improve editing and positioning of objects<br>[Improvement] Objects can display an own radius<br>[Improvement] Splashscreen with the five last updated/created floorplans<br>[Improvement] Make floorplan category more dynamic<br>[Improvement] Navigation tree displays positioned objects<br>[Improvement] New profiles analog to the CMDB-Explorer<br>[Improvement] Clicked objects should be displayed more prominently<br>[Bug] Update floorplan category with useful functions<br>[Bug] Font color is too dark for some object type colors<br>[Change] Replace object browser with location tree<br> |
| 1.1 | 2018-04-16 | [Improvement]   The scale will now be displayed dynamically<br>[Improvement]   Smoother zoom<br>[Bug] Background image won't be displayed after uploading<br>[Bug] Misspelling of formfactor in the English version of the floorplan<br> |
| 1.0.5 | 2017-10-02 | [Bug] Object list won't be displayed properly<br>[Bug] Background image won't be displayed after moving the installation<br>[Bug] Floorplan shows objects with non-"normal" status<br> |
| 1.0.4 | 2017-05-02 | [Bug] Self added icons do not scale in the floorplan extension<br>[Bug] Scale is not set, "form factor data" button is disabled<br> |
| 1.0.3 | 2016-10-24 | [Improvement] Failure while uploading a background image<br> |
| 1.0.2 |     | [Change] Compatibility with i-doit 1.8<br>[Bug] Object link is malformed when Wiki-URL is configured<br>[Bug] Read right is enough to make changes in Floorplan<br> |
| 1.0.1 | 2016-03-23 | Initial release |
